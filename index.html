<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mini Cosmetics Store</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background: #fff6f9;
      color: #333;
    }

    header {
      background: #ff4d88;
      color: white;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header h1 {
      margin: 0;
      font-size: 1.8rem;
    }

    #cartBtn {
      background: white;
      color: #ff4d88;
      border: none;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
    }

    #products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.5rem;
      padding: 2rem;
    }

    .product {
      background: white;
      border-radius: 15px;
      padding: 1rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      text-align: center;
      transition: transform 0.2s ease;
    }

    .product:hover {
      transform: scale(1.03);
    }

    .product img {
      max-width: 100%;
      border-radius: 10px;
    }

    .product h3 {
      margin: 0.5rem 0;
      color: #ff4d88;
    }

    .product p {
      margin: 0.3rem 0;
      font-weight: bold;
    }

    .product input {
      width: 50px;
      padding: 0.2rem;
      margin-top: 0.3rem;
      text-align: center;
    }

    .product button {
      margin-top: 0.5rem;
      padding: 0.5rem 1rem;
      background: #ff4d88;
      color: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
    }

    .product button:hover {
      background: #e63e75;
    }

 
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: white;
      padding: 2rem;
      border-radius: 15px;
      width: 90%;
      max-width: 500px;
      text-align: left;
      position: relative;
    }

    .modal-content h2 {
      margin-top: 0;
      color: #ff4d88;
    }

    .modal-content ul {
      list-style: none;
      padding: 0;
    }

    .modal-content ul li {
      display: flex;
      justify-content: space-between;
      margin: 0.5rem 0;
      padding: 0.5rem;
      background: #f9f9f9;
      border-radius: 8px;
    }

    .modal-content button {
      background: #ff4d88;
      color: white;
      border: none;
      padding: 0.4rem 0.8rem;
      border-radius: 15px;
      cursor: pointer;
    }

    .modal-content button:hover {
      background: #e63e75;
    }

    #closeCart {
      margin-top: 1rem;
      background: gray;
    }

    #closeCart:hover {
      background: #555;
    }
  </style>
</head>
<body>
  <header>
    <h1>Mini Cosmetics Store</h1>
    <button id="cartBtn">Cart (0)</button>
  </header>

  <section id="products"></section>

  <div id="cartModal" class="modal">
    <div class="modal-content">
      <h2>Your Cart</h2>
      <ul id="cartItems"></ul>

      <label><input type="checkbox" id="giftWrap"> Add Gift Wrap (+$2)</label><br>
      <label><input type="checkbox" id="freeShipping"> Free Shipping</label><br>
      <label>Discount Code: <input type="text" id="discountCode"></label>
      <button id="applyDiscount">Apply</button>

      <h3>Total: $<span id="totalPrice">0.00</span></h3>
      <button id="closeCart">Close</button>
    </div>
  </div>

  <script>
  
    class Product {
      constructor(name, price, image) {
        this.name = name;
        this.price = price;
        this.image = image;
      }
    }

    class ProductFactory {
      static createProduct(type) {
        switch(type) {
          case "lipstick": return new Product("Lipstick", 9.99, "C:/Users/Mary Joy/Downloads/lipstick.avif");
          case "foundation": return new Product("Foundation", 14.99, "C:/Users/Mary Joy/Downloads/Foundation.avif");
          case "eyeshadow": return new Product("Eyeshadow", 19.99, "C:/Users/Mary Joy/Downloads/shadow.avif");
          default: return null;
        }
      }
    }


    function giftWrapDecorator(product) {
      return {...product, price: product.price + 2};
    }
    function discountDecorator(product, discount) {
      return {...product, price: product.price * (1 - discount)};
    }

  
    class Cart {
      constructor() {
        this.items = [];
        this.subscribers = [];
      }

      addItem(product, qty) {
        this.items.push({...product, qty});
        this.notify();
      }

      removeItem(index) {
        this.items.splice(index, 1);
        this.notify();
      }

      subscribe(fn) {
        this.subscribers.push(fn);
      }

      notify() {
        this.subscribers.forEach(fn => fn());
      }
    }

    const cart = new Cart();
    const cartBtn = document.getElementById("cartBtn");
    const cartModal = document.getElementById("cartModal");
    const closeCart = document.getElementById("closeCart");
    const cartItemsList = document.getElementById("cartItems");
    const totalPriceEl = document.getElementById("totalPrice");

    const giftWrap = document.getElementById("giftWrap");
    const freeShipping = document.getElementById("freeShipping");
    const discountCode = document.getElementById("discountCode");
    const applyDiscount = document.getElementById("applyDiscount");

  
    const productsSection = document.getElementById("products");
    ["lipstick","foundation","eyeshadow"].forEach(type => {
      const product = ProductFactory.createProduct(type);
      const div = document.createElement("div");
      div.classList.add("product");
      div.innerHTML = `
        <img src="${product.image}" alt="${product.name}">
        <h3>${product.name}</h3>
        <p>$${product.price.toFixed(2)}</p>
        <label>Qty: <input type="number" value="1" min="1"></label><br>
        <button>Add to Cart</button>
      `;
      div.querySelector("button").addEventListener("click", () => {
        const qty = parseInt(div.querySelector("input").value);
        cart.addItem(product, qty);
      });
      productsSection.appendChild(div);
    });

 
    function updateCartUI() {
      cartItemsList.innerHTML = "";
      cart.items.forEach((item, i) => {
        const li = document.createElement("li");
        li.innerHTML = `
          ${item.name} x${item.qty} - $${(item.price * item.qty).toFixed(2)}
          <button data-index="${i}">Remove</button>
        `;
        li.querySelector("button").addEventListener("click", () => cart.removeItem(i));
        cartItemsList.appendChild(li);
      });


      let total = cart.items.reduce((sum, item) => sum + item.price * item.qty, 0);

      if (giftWrap.checked) total += 2;
      if (discountCode.value === "SAVE5") total *= 0.95;
      if (discountCode.value === "SAVE10") total *= 0.90;

      totalPriceEl.textContent = total.toFixed(2);

      cartBtn.textContent = `Cart (${cart.items.length})`;
    }

    cart.subscribe(updateCartUI);

    cartBtn.addEventListener("click", () => cartModal.style.display = "flex");
    closeCart.addEventListener("click", () => cartModal.style.display = "none");
    applyDiscount.addEventListener("click", updateCartUI);
    giftWrap.addEventListener("change", updateCartUI);
    freeShipping.addEventListener("change", updateCartUI);
  </script>
</body>
</html>
